12장 이어서 회원인증 프로그래밍 예제

## 통합구현 평가
친구 추가가 가능한 프로그램 구현

순번 프라이머리 키, 시퀀스
이름은 동명이인 있을수있음
전화번호는 null 가능

추가 버튼 누르면 
프로세스단으로 넘어가서
데이터베이스에 추가하고

1. 테이블 구현
FRIEND
NO, NAME, TEL

2. 시퀀스 생성
FRIEND_NO_SEQ
1부터 하나씩 증가하는 시퀀스

3. 쿼리 구현
- 친구 추가 QUERY
- 친구 목록 출력 QUERY

4. DTO, DAO(커넥션 풀) 구현

friendInputList.jsp (첫화면=뷰단)
friendInputListPro.jsp (친구 추가 프로세스단)

친구추가가 성공하면 다시 뷰단으로 돌아가기
그런데 실패했다면, 친구추가실패라고 alert발생하고 나서 뷰단으로 가기

-----
검색버튼 추가 예제
select * from 에서 where절 붙이고 like로 원하는 조건만 검색하는 쿼리문 작성
이제 모든 리스트를 출력하는 메소드 대신 이 메소드를 사용하면
리퀘스트 파라미터가 없을시 null이지만 쿼리문에서 빈스트링으로 작용하기때문에 
'%' || '' || '%' 이런식으로 되서 결국 모든 리스트를 출력하게 된다.
즉 안적으면 모든 리스트 출력, 매개변수 있으면 해당 리스트만 출력하게 되는 기능 완성

-----------------------------------------------------
# 13장 게시판 (답변, 페이징) 예제

아래의 순서대로 작업할 것이다.
1. DTO
2. DAO
3. 에러페이지
4. 글목록 list.jsp
5. 글쓰기폼 writeFrom.jsp
6. 글쓰기처리 writePro.jsp
7. 글내용보기 content.jsp
8. 글수정폼 updateForm.jsp
9. 글수정처리 updatePro.jsp
10. 글삭제폼 deleteForm.jsp
11. 글삭제처리 deletePro.jsp

-----

금요일까지 답변, 페이징 2가지의 기능을 배워볼것
예외페이지처리도 할것이라 web.xml도 프로젝트만들때 체크하고 생성

게시판을 짜려면 뭐부터 해야할까
테이블부터 구상해야한다

글번호(PK), 작성자, 제목, 내용, 이메일, 조회수, 작성일, IP주소,
비밀번호(삭제를 하려면 비번이 맞아야 삭제가능. 왜냐햐면 아직 로그인이랑 연동을 못하는 프로그램이라)
-----
답변글 기능을 이번에 구현해볼것이다 
그냥 원글만 저장하는것이면 문제가 없지만
답변글이라는 기능을 추가하려면 테이블 구현할때부터 컬럼을 추가해야한다

1. 어떤글의 답글이라면 마치 EMP테이블의 상사번호처럼 원글의 번호를 가지고있다. 원글의 경우 자기 글번호로 가진다. 그러면 해당 번호의 그룹이 만들어진다. 그룹별로 출력순서를 정하면된다.

2. 답변글이 여러개인 경우 같은 그룹내의 출력순서를 결정할수있는 필드가 또 필요하다

3. 답변의 답변글인경우 들여쓰기 레벨을 정해주는 필드가 필요.

즉 답변글 기능때문에 필드가 3개가 필요하다.
하지만 답변글기능은 다음에 배우고 이번에는 원글쓰기만 완성시켜본다
-----
테이블을 생성했다면 이제 쿼리를 구현한다.

1. 글갯수
페이징을 위해 필요하다. 글갯수에 따라서 아래에 페이지를 출력해야하기 때문
2. 글목록
3. 글쓰기(원글쓰기)  -- 사용자 입력 : 글쓴이, 제목, 본문, 이메일, PW
4. 글상세보기 (글번호로) -- 조회수올라감
5. 조회수 올리기
6. 글수정
7. 글삭제 (비밀번호를 맞게 입력한 경우만 삭제)
-----
DTO, DAO 구현
dto 멤버변수 생성할때마다 말하는거지만 첫번째와 두번째글자는 대문자쓰면 안된다. 자바빈태그, 스프링을 못쓴다.

dao test 도 한번 해보기
-----
예외페이지
개발할때는 예외페이지를 안하고 개발이 끝나고 처리한다
왜냐하면 개발중에 예외메세지를 확인해야 해결이 가능하기때문
그러나 이번에는 미리 만들어볼것이다
web.xml에 에러코드에 따른 location지정하고
해당하는 문서 작성
-----
글목록 list.jsp 만들기
평소에 하던대로 dao이용해서 출력하면된다 다른건 다 쉬운데
글 제목이 문제다 
글제목 클릭시 상세보기 페이지로 이동하기때문에 앵커태그가필요하고
조회수가 일정이상이면 hot 이미지도 넣을예정이다.
또한 글제목은 가운데정렬을 하면안된다.(답변글시 들여쓰기할예정이다)











