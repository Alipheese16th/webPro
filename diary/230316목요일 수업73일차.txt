오늘안으로 총집합예제 다 만들어보고 내일부터 개별프로젝트 시작하는기간임

# mvc_model 2 총집합 구현

헤더(비로그인,로그인,관리자)
푸터
관리자로그인
로그인
회원가입
	유효성검사
	submit검수
회원정보수정
회원탈퇴
	함부로못지움(게시판의 글이 회원아이디참조)
	해당회원아이디의글을 먼저 지우는작업이필요
글쓰기
	로그인한사람만 글쓰기가능
게시판(페이징,답변글,파일첨부)
	테이블 조인해서 작성자이름도 나와야함
글상세보기
	이메일은 안나옴 굳이 dto에 안담아도됨
답글쓰기
글수정
글삭제
-------

- (완) memberdao 이메일중복체크 쿼리하나 추가됨   DAO에서 추가구현 필요
- (완) BoardDto 만들때 mname도 집어넣야됨 조인해서 게시판출력할거임
- (완)조회수올리는로직 글상세보기안에서 처리안했음 따로 불러야함

1. DDL + dummy data 넣기
2. dao 에 넣을 쿼리 실행
3. dto 및 dao 생성
4. member 관련 기능 추가
(controller에 요청경로 추가 -> Service 구현 -> View 구현)
5. admin 관련 기능 추가
(controller에 요청경로 추가 -> Service 구현 -> View 구현)
6. 파일첨부 게시판 관련 기능 추가
(controller에 요청경로 추가 -> Service 구현 -> View 구현)


## 선생님꺼보고 추가구현할꺼
- (완) 정보수정페이지를 처음접근시 로그인페이지로 전환시키는데 next매개변수를 보내서
로그인완료시 수정페이지로 
- (완) 정보수정중에 이메일 원래작성했던것이면 아무 메세지도 안나오게 (빈스트링) 
- (완) 관리자로그인페이지
	사용자로그인중에 관리자로그인은 불가능하게 
	관리자 로그인중에 관리자로그인은 불가능하게
- (완)파일첨부게시판은 멀티파트리퀘스트라 기존 리퀘스트 파라미터가 사라짐  
(답글쓰기,글수정 서비스)
pageNum유지가 힘듬. requestScope에 setAttribute해야함
list서비스에서 reqeust.getAttribute하는조건도 추가
1. 멀티파트리퀘스트라 첨부파일로직짜야함
2. 리퀘스트의 파라미터로는pageNum 못넘겨서
  멀티파트리퀘스트에서 받고 리퀘스트속성으로 넘겨야함
(뷰페이지에서 input type=hidden 으로 param.pageNum을 보냄.
서블릿에서 mRequest로 받고 request.setAttribute로 실어서 다시보냄
<input type="hidden" name="pageNum" value="${param.pageNum}">
// pageNum받아서 리퀘스트속성으로 전송
request.setAttribute("pageNum", mRequest.getParameter("pageNum"));



- 새로고침시 반복실행문제 처리 


-글삭제시 답변글이 달려있다면? 답변글까지 삭제 처리하는로직(어려워서 구현안해도된다하심)
  글삭제시 답변글까지 한번에 삭제되는 로직
  단 아래의 답변글 전부 삭제되는것이아닌
  답의 답만 삭제되어야한다 좀 복잡한 쿼리문임
  또한 삭제 후에는 별개의 답글들은 step을 올려줘야함

1. 내가 지울글의 정보(group,step,indent)로 서브쿼리를 만든다
group이 같고
step이 더 크고
indent가 작거나 같은 것들의 최소 step값은? (서브쿼리)

내가 지울글의 아래에 위치한 글들중(indent가 더 큰경우는 내 답변글이라 제외)
나랑 상관없는 글들(indent가 작거나 같은경우)의 min(step)값을 구해서
내 step과 위의 step사이의 글들을 지우면 되는것이기에 결론은
내 group과 같고
내 step보다 크거나 같고, 서브쿼리의 step 미만인 경우만 지우는것

2. 이제 지우고나면 아래에 위치한 글들은 step을 줄여줘야 한다
스텝을 줄이는 양은 내가 지운 글들의 갯수(결과값)로 적용해야한다.
결과값만큼 step - (count)
내 group과 같고,
step이 나보다 큰것들만.


3. 글 1-1을 지울경우 group 1 step 1 indent 1
그룹내 아래에 위치한 글들이 없기때문에 서브쿼리 결과가 null이된다.
nvl을 이용해서 min(step)이 null이면 최댓값(9999)로 만든다.어차피 아래에 글이 없기때문에 해당그룹내 아래는 싹다 지우면되기때문

4. 다시한번정리 그니까 지우는공식은
- 나와 group이 같고
- step이 나와같거나 크고
- step이 서브쿼리(group이같고,step이더크고,indent가같거나작은경우) 미만인 경우
5. 다시한번정리 업데이트(step재정리)는
- 지운결과수만큼 step - (결과) 하고
- group이 같고
- step이 나보다 큰경우만



-------
글삭제추가구현
dao메서드 추가하고
글상세보기페이지에서 글삭제버튼 누르면 페이지전환할때
글그룹,글스텝,글인덴트를 파라미터로 전달하게해야함 (페이지넘은 기본)
글삭제 로직에서 매개변수받아서 메서드사용하고 결과받기
