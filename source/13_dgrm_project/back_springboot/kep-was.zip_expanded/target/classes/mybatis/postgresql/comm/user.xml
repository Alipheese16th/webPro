<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kist.portal.common.chems.mapper.UserMapper">

	<resultMap id="userMap" type="com.kist.portal.common.chems.dto.UserDto">
		<!-- [start 사용자] -->
		<result property="userId" column="usr_id" />								<!-- 사원번호 -->
		<result property="departmentCode" column="dept_cd" />						<!-- 부서코드 -->
		<result property="userKoreanName" column="usr_ko_nm" />						<!-- 사원명 한글 -->
		<result property="userEnglishName" column="usr_en_nm" />					<!-- 사원명 영어 -->
		<result property="userGermanyName" column="usr_de_nm" />					<!-- 사원명 독일어 -->
		<result property="jkwCode" column="jkw_cd" />								<!-- 직위코드 -->
		<result property="jkwName" column="jkw_nm" />								<!-- 직위명 -->
		<result property="jkgCode" column="jkg_cd" />								<!-- 직무코드 -->
		<result property="jkgName" column="jkg_nm" />								<!-- 직위명 -->
		<result property="jkcCode" column="jkc_cd" />								<!-- 직책코드 -->
		<result property="jkcName" column="jkc_ko_nm" />							<!-- 직위명 -->
		<result property="userBirthDate" column="usr_birth_da" />					<!-- 생년월일 -->
		<result property="joinDate" column="joinc_da" />							<!-- 입사일자 -->
		<result property="offiClsfCode" column="offi_clsf_cd" />					<!-- 재직구분 코드 -->
		<result property="appointmentTypeCode" column="appo_type_cd" />				<!-- 발령유형코드 -->
		<result property="dispatchCompanyCode" column="detc_cmpy_cd" />				<!-- 파견회사코드 -->
		<result property="dispatchDepartmentCode" column="dptc_dept_cd" />			<!-- 파견부서코드 -->
		<result property="userEmail" column="usr_email" />							<!-- 이메일 -->
		<result property="iptPhoneNo" column="ipt_phon_no" />						<!-- IPT 전화번호 -->
		<result property="companyPhoneNo" column="cmpy_phon_no" />					<!-- 회사 전화번호 -->
		<result property="userCellPhoneNo" column="usr_cpho_no" />					<!-- 사원 휴대전화 번호 -->
		<result property="faxNo" column="fax_no" />									<!-- 팩스번호 -->
		<result property="partnersYn" column="prtn_yn" />							<!-- 협력업체 여부 -->
		<result property="languageCode" column="lang_cd" />							<!-- 언어 코드 -->
		<result property="retirementDate" column="retir_da" />						<!-- 퇴직일자 -->
		<result property="useYn" column="usg_yn" />									<!-- 사용여부 -->
		<result property="delYn" column="del_yn" />									<!-- 삭제여부 -->
		<result property="userPassword" column="usr_pwd" />							<!-- 패스워드 -->
		<result property="createUserId" column="crt_usr_id" />						<!-- 등록자아이디 -->
		<result property="updateUserId" column="upt_usr_id" />						<!-- 수정자아이디 -->
		<result property="lastLoginDateTime" column="lat_login_dt" />				<!-- 최근로그인 일시 -->
		<result property="lastLoginIpAddress" column="lat_login_ip_addr" />			<!-- 최근 접속 IP 주소 -->
		<result property="roleCode" column="role_cd" />								<!-- 권한 코드 -->
		<result property="roleName" column="role_nm" />								<!-- 권한 명 -->
		<result property="wkplId" column="wkpl_id" />								<!-- ?? -->
		<result property="wkplName" column="wkpl_nm" />								<!-- ?? -->
		<!-- [end 사용자] -->
		<!-- [start 부서] -->
		<result property="departmentCode" column="dept_cd" />	
		<result property="upDepartmentCode" column="up_dept_cd" />	
		<result property="companyCode" column="cmpy_cd" />	
		<result property="departmentName" column="dept_nm" />	
		<result property="departmentUserId" column="dpth_usr_id" />	
		<result property="departmentUsageYn" column="dpth_usg_yn" />	
		<result property="departmentDeleteYn" column="dpth_del_yn" />	
		<result property="departmentCreateUserId" column="dpth_crt_usr_id" />	
		<result property="departmentCreateDateTime" column="dpth_crt_dt" />	
		<result property="departmentUpdateUserId" column="dpth_upt_usr" />	
		<result property="departmentUpdateDateTime" column="dpth_upt_dt" />	
		<result property="departmentTree" column="dept_tree" />	
		<result property="departmentDepth" column="dept_depth" />	

		<!-- [end 부서] -->
	</resultMap>

	<!-- 
		로그인 사용자가 속한 회사의 부서 리스트 조회
		(재귀 조회)

		with recursive: 가상 테이블을 생성하면서, 가상 테이블 값을 참조하여 값을 결정
	 -->
	<select id="selectDeptTreeListNew" parameterType="com.kist.portal.common.chems.dto.UserDto" resultMap="userMap">
		/* selectDeptTreeList  */
		with recursive CODE_LIST (
			dept_cd, 					/* 부서코드 */
			dept_ko_nm,			 		/* 부서명한국어 */
			up_dept_cd, 				/* 상위부서코드 */
			depth, 						/* 깊이 */
			path, 						/* 부서코드[] */
			cycle						/* 재귀여부 */
		) as (
			select
				A.dept_cd, 					/* 부서코드 */
				A.dept_ko_nm, 				/* 부서명한국어 */
				A.up_dept_cd, 				/* 상위부서코드 */
				1, 							/* 깊이 */
				array[A.dept_cd::text], 	/* 부서코드[] */
				false 						/* 재귀여부 */
			from
				tb_co_dept A				/* 부서 테이블 */
			where	
				A.up_dept_cd = '$0'			/* 상위부서코드 eq */
			and A.cmpy_cd = #{session.companyCode}	/* 로그인 사용자의 회사코드 eq */
			union all						/* === 합연산 === */
			select
				A.dept_cd, 					/* 부서코드 */
				A.dept_ko_nm, 				/* 부서명한국어 */
				A.up_dept_cd, 				/* 상위부서코드 */
				B.DEPTH + 1,				/* 깊이 (CODE_LIST + 1) */
				ARRAY_APPEND(B.PATH, A.dept_cd::text),	/* 부서코드[] */
				A.dept_cd = any(B.PATH)		/* 부서코드 */
			from
				tb_co_dept A,				/* 부서 테이블 */
				CODE_LIST B
			where
				A.up_dept_cd = B.dept_cd	/* 부서코드 eq */
			and A.cmpy_cd = #{session.companyCode}	/* 로그인 사용자의 회사코드 eq */
			and not cycle
		)
		select
			dept_cd,						/* 부서코드 */
			dept_ko_nm as dept_nm,			/* 부서명한국어 */
			up_dept_cd,						/* 상위부서코드 */
			depth as dept_depth,			/* 깊이 */
			replace(replace(replace(path::text,'{',''),'}',''),',','.') as dept_tree
		from
			CODE_LIST cl
		where
			1=1
		order by
			path
	</select>
	<select id="selectDeptTreeList" parameterType="sqlMap" resultType="sqlMap">
		/* selectDeptTreeList  */
		with recursive CODE_LIST(dept_cd, dept_ko_nm, up_dept_cd, depth, path, cycle) as (
		select
			A.dept_cd,
			A.dept_ko_nm,
			A.up_dept_cd,
			1,
			array[A.dept_cd::text],
			false
		from
			tb_co_dept A
		where	
			A.up_dept_cd = '$0'
	    and A.cmpy_cd = #{SESS_CMPN}
		union all
		select
			A.dept_cd,
			A.dept_ko_nm,
			A.up_dept_cd,
			B.DEPTH + 1,
			ARRAY_APPEND(B.PATH, A.dept_cd::text),
			A.dept_cd = any(B.PATH)
		from
			tb_co_dept A,
			CODE_LIST B
		where
			A.up_dept_cd = B.dept_cd
	    and A.cmpy_cd = #{SESS_CMPN}
		and not cycle )
		select
			dept_cd as id,
			dept_ko_nm as name,
			up_dept_cd,
			depth as A_MENU_LEVEL,
			replace(replace(replace(path::text,'{',''),'}',''),',','.') as tree
		from
			CODE_LIST cl
		where
			1=1
		order by
			path
	</select>
	
	<!-- 
		로그인 사용자가 속한 회사의 부서 리스트 조회
	 -->
	<select id="selectDeptSearchListNew" parameterType="com.kist.portal.common.chems.dto.UserDto" resultMap="userMap">
		/* selectDeptSearchList */
		select 
			tcd.dept_cd				/* 부서코드 */
			,tcd.up_dept_cd			/* 상위부서코드 */
			,tcd.cmpy_cd			/* 회사코드 */
			,case when #{session.languageCode} = 'KO'
				then tcd.dept_ko_nm
				else tcd.dept_en_nm
			end as dept_nm						/* 부서명 */
			,tcd.dpth_usr_id					/* 부서장사원번호 */
			,tcd.usg_yn	as dpth_usg_yn			/* 사용여부 */
			,tcd.del_yn	as dpth_del_yn			/* 삭제여부 */
			,tcd.crt_usr_id as dpth_crt_usr_id	/* 생성사원번호 */
			,tcd.crt_dt as dpth_crt_dt			/* 생성일시 */
			,tcd.upt_usr_id as dpth_upt_usr_id	/* 수정사원번호 */
			,tcd.upt_dt as dpth_upt_dt			/* 수정일시 */
		from
			tb_co_dept tcd				/* 부서 테이블 */
		where	1=1
		<if test='departmentName != null and departmentName != ""'>
			/* 검색조건 like 부서명 */
			and (
				tcd.dept_ko_nm like concat('%', trim(#{departmentName}), '%')
				or tcd.dept_en_nm like concat('%', trim(#{departmentName}), '%')
			)
		</if>
			/* 로그인 사용자의 회사코드 */
		  	and tcd.cmpy_cd = #{session.companyCode}
		order by tcd.dept_ko_nm 
	</select>
	<select id="selectDeptSearchList" parameterType="sqlMap" resultType="sqlMap">
		/* selectDeptSearchList */
		select 
			tcd.dept_cd
			,tcd.up_dept_cd
			,tcd.cmpy_cd
			,case when #{SESS_LANG} = 'KO' then tcd.dept_ko_nm
								  else tcd.dept_en_nm
			end as dept_nm
			,tcd.dpth_usr_id
			,tcd.usg_yn
			,tcd.del_yn
			,tcd.crt_usr_id
			,tcd.crt_dt
			,tcd.upt_usr_id
			,tcd.upt_dt
		from
			tb_co_dept tcd 
		where	1=1
		<if test='dept_nm != null and dept_nm != ""'>
			and (tcd.dept_ko_nm like concat('%', trim(#{dept_nm}), '%') or tcd.dept_en_nm like concat('%', trim(#{dept_nm}), '%') )
		</if>
		  and tcd.cmpy_cd = #{SESS_CMPY}
		order by tcd.dept_ko_nm 
	</select>
	
	<select id="selectUserPopList" parameterType="sqlMap" resultType="sqlMap">
		/* selectUserPopList */
		select 
			tcu.usr_id
			,tcu.dept_cd
			,(select case when #{SESS_LANG} = 'KO' then tcd.dept_ko_nm
					      else tcd.dept_en_nm
				     end as dept_nm
			    from tb_co_dept tcd
			   where tcd.dept_cd = tcu.dept_cd 
			 ) as dept_nm
			,case when #{SESS_LANG} = 'KO' then tcu.usr_ko_nm
			      when #{SESS_LANG} = 'EN' then tcu.usr_en_nm
				  else tcu.usr_zh_nm
			end as usr_nm
			,tcu.usr_email
			,tcu.usr_cpho_no
			,substring(tcu.joinc_da, 0, 5) || '-' || substring(tcu.joinc_da, 5, 2) || '-' || substring(tcu.joinc_da, 7, 2) as joinc_da
			,tcu.usr_clsf_cd
			,tcu.usg_yn
			,tcu.del_yn
			,(select case when #{SESS_LANG} = 'KO' then d.dept_ko_nm 
			              else d.dept_en_nm 
			         end as dept_en_nm
		        from tb_co_dept d
		       where d.dept_cd = tcu.addp_org_1st_cd
		     ) as unit_nm
		    ,(select case when #{SESS_LANG} = 'KO' then d.dept_ko_nm 
			              else d.dept_en_nm 
			         end as dept_en_nm
		        from tb_co_dept d
		       where d.dept_cd = tcu.addp_org_2nd_cd
		     ) as div_nm
		    ,(select case when #{SESS_LANG} = 'KO' then d.dept_ko_nm 
			              else d.dept_en_nm 
			         end as dept_en_nm
		        from tb_co_dept d
		       where d.dept_cd = tcu.addp_org_3rd_cd
		     ) as team_nm
		     ,fn_get_cd('CO00000009', tcu.cmpy_cd, 'NM', #{SESS_LANG}) as cmpy_nm
		     ,jkw_ko_nm
		from tb_co_user tcu 
		where   tcu.usg_yn = 'Y'
			and tcu.del_yn  = 'N'
		<if test='SESS_CMPY != null and SESS_CMPY != ""'>
			and tcu.cmpy_cd = #{SESS_CMPY}
		</if>
		<if test='dept_cd != null and dept_cd != ""'>
			and tcu.dept_cd = #{dept_cd}
		</if>
		<if test='usr_nm != null and usr_nm != ""'>
			and (
					tcu.usr_id like concat('%', trim(#{usr_nm}), '%') or 
					tcu.usr_ko_nm like concat('%', trim(#{usr_nm}), '%') or 
					tcu.usr_en_nm like concat('%', trim(#{usr_nm}), '%') or 
					tcu.usr_zh_nm like concat('%', trim(#{usr_nm}), '%') or 
					tcu.usr_email like concat('%', trim(#{usr_nm}), '%')
			)
		</if>	
		order by tcu.usr_id 
	</select>
	
	<update id="updateUserList" parameterType="com.kist.portal.common.chems.dto.UserDto">
        /* updateUserList */
        update tb_co_user
           set usg_yn = #{usg_yn}
       		  ,del_yn= #{del_yn}
         where usr_id  = #{usr_id}
    </update>
	
	 <select id="selectUserList" parameterType="com.kist.portal.common.chems.dto.UserDto" resultMap="userMap">
		/* selectUserList */
		select
				tcu.usr_id
				,tcu.usr_ko_nm
				,tcu.wkpl_id
			  ,fn_get_cd('ST00000002', tcu.wkpl_id, 'NM', 'KO') as wkpl_nm
			  ,tcu.cmpy_nm
			  ,tcu.usr_id
			  ,case when #{session.languageCode} = 'KO' then tcu.usr_ko_nm 
			  	  	else tcu.usr_en_nm 
			  	end as usr_nm
			  ,tcu.dept_cd
			  ,(select case when #{session.languageCode} = 'KO' then tcd.dept_ko_nm
			  	  		    else tcd.dept_en_nm
			  			end as dept_nm
			  	  from tb_co_dept tcd
			  	 where tcd.dept_cd = tcu.dept_cd) as dept_nm
			  ,tcu.jkw_cd
			  ,tcu.jkc_ko_nm
			  ,case when #{session.languageCode} = 'KO' then tcu.jkw_ko_nm 
			  	    else tcu.jkw_en_nm 
			  	end as jkw_nm
			  ,tcu.usr_email
			  ,tcu.usg_yn
			  ,tcu.del_yn
			  ,to_char(to_timestamp(tcu.lat_login_dt , 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS') AS lat_login_dt
			  ,tcu.lat_login_ip_addr
				/* 조회 컬럼 추가 */
				, tcu.usr_id													/* 사원_번호 */
				, tcu.dept_cd													/* 부서_코드 */
				, tcu.usr_ko_nm													/* 사원_명_한국어 */
				, tcu.usr_en_nm													/* 사원_명_엉어 */
				, tcu.usr_de_nm													/* 사원_명_독일 */
				, tcu.jkw_cd													/* 직위_코드 */
				, tcu.jkg_cd													/* 직무_코드 */
				, tcu.jkc_cd													/* 직책_코드 */
				, tcu.usr_birth_da												/* 사원_생년월일 */
				, tcu.joinc_da													/* 사원_입사_일자 */
				, tcu.offi_clsf_cd												/* 재직_구분_코드 */
				, tcu.appo_type_cd												/* 발령_유형_코드 */
				, tcu.dptc_cmpy_cd												/* 파견_회사_코드 */
				, tcu.dptc_dept_cd												/* 파견_부서_코드 */
				, tcu.usr_email													/* 사원_이메일 */
				, tcu.ipt_phon_no												/* IPT_전화_번호 */
				, tcu.cmpy_phon_no												/* 회사_전화_번호 */
				, tcu.usr_cpho_no												/* 사원_휴대전화_번호 */
				, tcu.fax_no													/* 팩스_번호 */
				, tcu.prtn_yn													/* 협력업체_여부 */
				, tcu.lang_cd													/* 언어_코드 */
				, tcu.retir_da													/* 퇴직_일자 */
				, tcu.usg_yn													/* 사용_여부 */
				, tcu.del_yn													/* 삭제_여부 */
				, tcu.crt_dt 													/* 생성_일시 */
				, tcu.upt_usr_id												/* 수정_사원_번호 */
				, tcu.upt_dt													/* 수정_일시 */
				, tcu.usr_clsf_cd												/* 직원_구분_코드 */
				, array_to_string(array_agg(tcur.role_no), ',')		as role_cd	/* 권한코드 */
				, array_to_string(array_agg(tcr.role_expl), ',')	as role_nm	/* 권한명 */
				, lat_login_dt													/* 최근 로그인 일시 */
				, lat_login_ip_addr												/* 최근_로그인_IP_주소 */
		  from tb_co_user tcu 													/* 사용자 테이블 */
		  left outer join tb_co_dept tcd										/* 부서 테이블 */
			on tcu.dept_cd = tcd.dept_cd
			left outer join tb_co_user_role tcur								/* 사용자별 권한테이블 */
			on tcu.usr_id = tcur.usr_id
			and tcur.del_yn = 'N'
			and tcur.usg_yn = 'Y' 
			left outer join tb_co_role tcr 										/* 권한정보 테이블 */
			on tcur.role_no = tcr.role_no 
		 where 1=1 
		<if test='companyCode != null and companyCode != ""'>
		   and tcu.cmpy_cd = #{companyCode}
		</if>
		<if test='wkpl_id != null and wkpl_id != ""'>
		   and tcu.wkpl_id = #{wkpl_id}
		</if>
		<if test='userId != null and userId != ""'>
		   and tcu.usr_id like concat('%', trim(#{userId}), '%')
		</if>	
		<if test='userName != null and userName != ""'>
		   and (tcu.usr_ko_nm like concat('%', trim(#{userName}), '%')
		   	    or tcu.usr_en_nm like concat('%', trim(#{userName}), '%')
		   	    or tcu.usr_de_nm like concat('%', trim(#{userName}), '%'))
		</if>	
		<if test='departmentName != null and departmentName != ""'>
		   and (tcd.dept_ko_nm like concat('%', trim(#{departmentName}), '%')
		   		or tcd.dept_en_nm like concat('%', trim(#{departmentName}), '%'))
		</if>
		<if test='useYn != null and useYn != ""'>
		   and tcu.usg_yn = #{useYn}
		</if>
		<if test='delYn != null and delYn != ""'>
		   and tcu.del_yn = #{delYn}
		</if>
		group by tcu.usr_id
		order by usr_id
	</select>

	<insert id="createUser" parameterType="com.kist.portal.common.chems.dto.UserDto">
		/* user.createUser */
		insert into	tb_co_user (
			usr_id				/* 사번 */
			, dept_cd			/* 부서코드 */
			, usr_ko_nm			/* 이름 (한글) */
			, usr_pwd			/* 패스워드 */
			, usr_email			/* 이메일 */
			, crt_usr_id		/* 등록자 사번 */
			, upt_usr_id		/* 수정자 사번 */
		)
		values (
			#{userId}				/* 사번 */
			, #{departmentCode}		/* 부서코드 */
			, #{userKoreanName}		/* 이름 (한글) */
			, #{userPassword}		/* 패스워드 */
			, #{userEmail}			/* 이메일 */
			, #{session.userId}		/* 등록자 사번 */
			, #{session.userId}		/* 수정자 사번 */
		)
	</insert>

	<update id="updateUser" parameterType="com.kist.portal.common.chems.dto.UserDto">
		/* user.updateUser */
		update	tb_co_user										/* 사용자 테이블 */
			set		dept_cd = #{departmentCode}					/* 부서_코드 */
					, usr_ko_nm = #{userKoreanName}				/* 사원_명_한국어 */
					, usr_en_nm = #{userEnglishName}			/* 사원_명_엉어 */
					, usr_de_nm = #{userGermanyName}			/* 사원_명_독일 */
					, jkw_cd = #{jkwCode}						/* 직위_코드 */
					, jkg_cd = #{jkgCode}						/* 직무_코드 */
					, jkc_cd = #{jkcCode}						/* 직책_코드 */
					, usr_birth_da = #{userBirthDate}			/* 사원_생년월일 */
					, joinc_da = #{joinDate}					/* 사원_입사_일자 */
					, offi_clsf_cd = #{offiClsfCode}			/* 재직_구분_코드 */
					, appo_type_cd = #{appointmentTypeCode}		/* 발령_유형_코드 */
					, dptc_cmpy_cd = #{dispatchCompanyCode}		/* 파견_회사_코드 */
					, dptc_dept_cd = #{dispatchDepartmentCode}	/* 파견_부서_코드 */
					, usr_email = #{userEmail}					/* 사원_이메일 */
					, ipt_phon_no = #{iptPhoneNo}				/* IPT_전화_번호 */
					, cmpy_phon_no = #{companyPhoneNo}			/* 회사_전화_번호 */
					, usr_cpho_no = #{userCellPhoneNo}			/* 사원_휴대전화_번호 */
					, fax_no = #{faxNo}							/* 팩스_번호 */
					, prtn_yn = #{partnersYn}					/* 협력업체_여부 */
					, lang_cd = #{languageCode}					/* 언어_코드 */
					, retir_da = #{retirementDate}				/* 퇴직_일자 */
					, usg_yn = #{useYn}							/* 사용_여부 */
					, del_yn = #{delYn}							/* 삭제_여부 */
					, usr_pwd = #{userPassword}					/* 패스워드 */
					, upt_usr_id = #{session.userId}		/* 수정자 사번 */
		where		usr_id = #{userId}							/* 사번 */
	</update>

	<update id="deleteUser" parameterType="java.lang.String">
		/* user.deleteUser */
		update	tb_co_user
			set	del_yn = 'Y'			/* 삭제여부 */
				, usg_yn = 'N'			/* 사용여부 */
		where	usr_id = #{userId}		/* 사번 */
	</update>

	<!--
		사용자 ~ 권한 매핑 정보 추가
		특정 사용자에 매핑할 권한 정보를 추가한다.
	-->
	<insert id="createUserRole" parameterType="com.kist.portal.common.chems.dto.UserDto">
		/* user.createUserRole */
		insert into
		tb_co_user_role			/* 사용자 ~ 권한 매핑 테이블 */
		(
			usr_id				/* 사용자 아이디 */
			, role_no			/* 권한 아이디 */
			, usg_yn			/* 사용여부 */
			, del_yn			/* 삭제여부 */
			, crt_usr_id		/* 생성자 아이디 */
			, crt_dt			/* 생성일 */
			, upt_usr_id		/* 변경자 아이디 */
			, upt_dt			/* 변경일 */
		)
		values (
			#{usr_id}
			, #{role_no}
			, 'Y'
			, 'N'
			, #{crt_usr_id}
			, to_char(now(), 'YYYYMMDDHH24MISS')
			, #{crt_usr_id}
			, to_char(now(), 'YYYYMMDDHH24MISS')
		);
	</insert>

	<!-- 
		사용자 ~ 권한 매핑 정보 삭제
		특정 사용자에 매핑된 권한 정보를 삭제한다.
	 -->
	<delete id="removeUserRole" parameterType="com.kist.portal.common.chems.dto.UserDto">
		/* user.removeUserRole */
		delete
			from tb_co_user_role tcur			/* 사용자 ~ 권한 매핑 테이블 */
		where
			tcur.usr_id = #{usr_id}				/* 특정 사용자에 물린... */
			and tcur.role_no in 				/* ... 해당 권한 정보를 권한-사용자 매핑 테이블에서 제거 */
			<foreach item="role_nos_item" collection="role_nos" open="(" separator="," close=")">
				#{role_nos_item}
			</foreach>
	</delete>


	<!-- 
		특정 사용자에게 매핑된 권한 id[] 반환
	 -->
	<select id="selectRoleNosByUserId" parameterType="java.lang.String" resultType="java.lang.String">
		/* user.selectUserIdsByRoleNo */
		select
			role_no					/* 권한 id */
		from
			tb_co_user_role			/* 사용자 ~ 권한 매핑 테이블 */
		where
			usr_id = #{usr_id}		/* 특정 사용자 id */
		;
	</select>



</mapper>